<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chart of Accounts- FinKen</title>
    <link rel="stylesheet" href="/frontend/styles.css">
</head>
<body>
    <!-- Header with Branding -->
    <div class="header">
        <div class="branding">
            <div class="branding-content">
                <img src="/frontend/images/finkenlogo.png" alt="FinKen Logo" class="logo-image">
                <div class="branding-text">
                    <h1><span class="pocket-text">Pocket</span><span class="watch-text">Watch</span></h1>
                    <p>Financial Accounting App</p>
                </div>
            </div>
        </div>

        <!-- User Header -->
        <div class="user-header">
            <div class="user-info">
                <span class="user-name">{{ user_name }}</span>
                <span class="user-role-badge">{{ user_role.title() }}</span>
            </div>
            <div class="user-profile">
                <img src="{{ url_for('profile_image', filename=user_profile_picture) }}"
                     alt="Profile Picture" class="profile-image">
            </div>
        </div>
    </div>

    <!-- Navigation Menu -->
    <button class="nav-toggle">Toggle Navigation</button>
    <nav class="navbar">
        <ul class="nav-list">
            <img src="/frontend/images/finkenlogo.png" alt="FinKen Logo" class="logo-image">
            <li><a href="/Home">Home</a></li>
            {% if user_role == 'administrator' %}
            <!-- Administrator-only options -->
                <li><a href="/ManageRegistrations">Manage Registrations</a></li>
                <li><a href="/Users">Users</a></li>
                <li><a href="/ExpiringPasswords">Expiring Passwords</a></li>
            {% endif %}
            <!-- Common options for all users -->
            <li><a href="/ChartOfAccounts"> Chart of Accounts</a></li>
            <li><a href="#">Statements</a></li>
            <li><a href="/SignOut">Sign Out</a></li>
        </ul>
    </nav>

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="flash-messages">
                {% for category, message in messages %}
                    <div class="flash-message flash-{{ category }}">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}
    <!--Main Content -->
  <main class="container">
    <h1>Ledger for account {{ account_number }}</h1>
    {% if entries %}
      <table class="data-table">
        <thead><tr><th>Date</th><th>Description</th><th>Debit</th><th>Credit</th></tr></thead>
        <tbody>
        {% for e in entries %}
          <tr>
            <td>{{ e.date }}</td>
            <td>{{ e.description }}</td>
            <td style="text-align:right">{{ e.debit }}</td>
            <td style="text-align:right">{{ e.credit }}</td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p>No ledger transactions found for this account.</p>
    {% endif %}
  </main>

    <script>
        document.querySelector('.nav-toggle').addEventListener('click', function() {
            document.querySelector('.navbar').style.left = '0';
        });

        document.querySelector('.navbar').addEventListener('mouseleave', function() {
            document.querySelector('.navbar').style.left = '-250px';
        });

        window.user_role = '{{ user_role }}';
    </script>

</body>
</html>