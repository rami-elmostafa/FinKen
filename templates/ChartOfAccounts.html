<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chart of Accounts</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
  <style>
    /* Page-specific styles */
    body {
      background-color: #f5f5f5;
    }

    /* Content Container */
    .content-wrapper {
      padding: 20px;
    }
        
    .accounts-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
        
    .header-left {
      display: flex;
      align-items: center;
      gap: 15px;
    }
        
    .accounts-header h2 {
      color: #FFC900;
      font-size: 32px;
      font-weight: 300;
      margin: 0;
    }
    
    #accountModal h2 {
      margin-bottom: 12px;
    }
    
    /* --- Form Layout --- */
    /* Sets up a grid format for neatness */
    #accountForm {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px 16px;
    }

    /* Turns each label into a grid for neatness */
    #accountForm label {
      display: grid;
      grid-template-columns: 140px 1fr;
      align-items: center;
      gap: 8px;
      width: 100%;
    }

    #accountForm input,
    #accountForm select {
      width: 100%;
      padding: 6px 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
    }

    .modal-actions .btn, #cancelModal {
      background: white !important;
      border: 1px solid #ddd !important;
      padding: 8px 20px !important;
      border-radius: 4px !important;
      cursor: pointer !important;
      font-size: 14px !important;
      font-weight: 500 !important;
      transition: all 0.2s ease !important;
      box-shadow: 0 1px 2px rgba(0,0,0,0.05) !important;
      color: #333 !important;
      display: inline-block !important;
      width: auto !important;
      min-width: auto !important;
      max-width: none !important;
    }
    
    .modal-actions .btn:hover, #cancelModal:hover {
      background: #f8f9fa !important;
      border-color: #bbb !important;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1) !important;
      transform: translateY(-1px);
    }

    .modal-actions .btn:active, #cancelModal:active {
      transform: translateY(0);
      box-shadow: 0 1px 2px rgba(0,0,0,0.05) !important;
    }
        
    .add-btn {
      background-color: #000000;
      color: white;
      border: none;
      padding: 8px 20px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.2s ease;
      box-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }
        
    .add-btn:hover {
      background-color: #333333;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
      transform: translateY(-1px);
    }

    .add-btn:active {
      transform: translateY(0);
      box-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }
        
    .search-box {
      display: flex;
      gap: 10px;
    }
        
    .search-input {
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 4px;
      width: 200px;
      font-size: 14px;
    }
        
    .search-btn {
      background-color: #000000;
      color: white;
      border: none;
      padding: 8px 20px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
    }
        
    .search-btn:hover {
      background-color: #000000;
    }
        
    table {
      width: 100%;
      background-color: white;
      border-collapse: collapse;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      table-layout: fixed;
    }
        
    th {
      background-color: #f8f9fa;
      color: #666;
      font-weight: 500;
      text-align: left;
      padding: 12px;
      border-bottom: 2px solid #e0e0e0;
      font-size: 13px;
    }
        
    th.sortable {
      cursor: pointer;
      position: relative;
      padding-right: 25px;
    }
        
    th.sortable::after {
      content: '▲';
      position: absolute;
      right: 8px;
      font-size: 10px;
      color: #999;
    }
        
    td {
      padding: 12px;
      border-bottom: 1px solid #e8e8e8;
      font-size: 14px;
      color: #333;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
        
    tr:hover {
      background-color: #f9f9f9;
    }
        
    .account-number {
      color: #4a9eff;
      cursor: pointer;
    }
        
    .account-number:hover {
      text-decoration: underline;
    }
        
    .edit-btn, .editBtn {
      background-color: #4a9eff;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
      font-weight: 500;
      transition: all 0.2s ease;
      box-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }
        
    .edit-btn:hover, .editBtn:hover {
      background-color: #3d8ce6;
      box-shadow: 0 2px 4px rgba(0,0,0,0.15);
      transform: translateY(-1px);
    }

    .edit-btn:active, .editBtn:active {
      transform: translateY(0);
      box-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }

    .deactivateBtn {
      background-color: #ff4444;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
      font-weight: 500;
      transition: all 0.2s ease;
      box-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }
    
    .deactivateBtn:hover {
      background-color: #dd2222;
      box-shadow: 0 2px 4px rgba(0,0,0,0.15);
      transform: translateY(-1px);
    }

    .deactivateBtn:active {
      transform: translateY(0);
      box-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }

    /* Pagination buttons */
    #prevPage, #nextPage {
      background: white !important;
      border: 1px solid #ddd !important;
      padding: 8px 16px !important;
      border-radius: 4px !important;
      cursor: pointer !important;
      font-size: 14px !important;
      font-weight: 500 !important;
      transition: all 0.2s ease !important;
      box-shadow: 0 1px 2px rgba(0,0,0,0.05) !important;
      color: #333 !important;
      display: inline-block !important;
      width: auto !important;
      min-width: auto !important;
      max-width: none !important;
    }
    
    #prevPage:hover:not(:disabled), #nextPage:hover:not(:disabled) {
      background: #f8f9fa !important;
      border-color: #bbb !important;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1) !important;
      transform: translateY(-1px);
    }

    #prevPage:active:not(:disabled), #nextPage:active:not(:disabled) {
      transform: translateY(0);
      box-shadow: 0 1px 2px rgba(0,0,0,0.05) !important;
    }

    #prevPage:disabled, #nextPage:disabled {
      background: #f5f5f5 !important;
      color: #999 !important;
      cursor: not-allowed !important;
      opacity: 0.6;
    }

    #paginationInfo {
      font-size: 14px;
      color: #666;
      padding: 0 8px;
    }

    /* col widths to match previous layout */
    .col-number { width: 8%; }
    .col-name { width: 42%; }
    .col-type { width: 8%; }
    .col-term { width: 6%; }
    .col-balance { width: 9%; }
    .col-createdby { width: 7%; }
    .col-date { width: 6%; }
    .col-comments { width: 6%; }
    .col-actions { width: 10%; }
  </style>
</head>
<body>
  <!-- Header with Branding -->
  <div class="header">
    <div class="branding">
      <div class="branding-content">
        <img src="{{ url_for('static', filename='images/finkenlogo.png') }}" alt="FinKen Logo" class="logo-image">
        <div class="branding-text">
          <h1><span class="pocket-text">Pocket</span><span class="watch-text">Watch</span></h1>
          <p>Financial Accounting App</p>
        </div>
      </div>
    </div>
    <!-- User Header -->
    <div class="user-header">
      <div class="user-info">
        <span class="user-name">{{ user_name }}</span>
        <span class="user-role-badge">{{ user_role.title() }}</span>
      </div>
      <div class="user-profile">
        <img src="{{ url_for('profile_image', filename=user_profile_picture) }}" 
             alt="Profile Picture" class="profile-image">
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="content-wrapper">
  <div class="accounts-header">
    <div class="header-left">
      <h2>Chart of Accounts</h2>
      <!-- keep the id the JS expects -->
      <button id="newAccountBtn" class="add-btn">+ Add</button>
    </div>
    <div class="search-box">
      <!-- keep the ids for JS wiring -->
      <input id="search" class="search-input" placeholder="Search">
      <button id="searchBtn" class="search-btn">Search</button>
    </div>
  </div>
    
  <table id="accountsTable">
    <colgroup>
      <col class="col-number" />
      <col class="col-name" />
      <col class="col-type" />
      <col class="col-term" />
      <col class="col-balance" />
      <col class="col-createdby" />
      <col class="col-date" />
      <col class="col-comments" />
      <col class="col-actions" />
    </colgroup>
    <thead>
      <tr>
        <th class="sortable col-number">Account<br>Number</th>
        <th class="sortable col-name">Name</th>
        <th class="col-type">Type</th>
        <th class="col-term">Term</th>
        <th class="col-balance">Balance</th>
        <th class="col-createdby">Created By</th>
        <th class="col-date">Date<br>Created</th>
        <th class="col-comments">Comments</th>
        <th class="col-actions"> </th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <div class="pagination" id="accountsPagination" style="margin-top:16px; display:flex; gap:12px; align-items:center; justify-content:center; background:white; padding:16px; border-radius:4px; box-shadow:0 1px 3px rgba(0,0,0,0.1)">
    <button id="prevPage" class="btn">← Previous</button>
    <span id="paginationInfo"></span>
    <button id="nextPage" class="btn">Next →</button>
  </div>

  <!-- Add/Edit modal (preserve existing form IDs) -->
  <div id="accountModal" class="modal" aria-hidden="true" style="display:none">
    <div class="modal-content" style="background:#fff;padding:16px;border-radius:6px;max-width:600px;margin:24px auto;box-shadow:0 6px 24px rgba(0,0,0,0.12)">
      <h2 id="modalTitle">Add Account</h2>
      <form id="accountForm">
        <label>Account Number <input name="AccountNumber" required pattern="\d+" title="Digits only, leading zeros allowed"></label>
        <label>Account Name <input name="AccountName" required></label>
        <label>Description <input name="Description"></label>
        <label>Normal Side <select name="NormalSide" required><option value="Debit">Debit</option><option value="Credit">Credit</option></select></label>
        <label>Category <input name="Category"></label>
        <label>Subcategory <input name="Subcategory"></label>
        <label>Initial Balance <input name="InitialBalance" value="0.00"></label>
        <label>Debit <input name="Debit" value="0.00"></label>
        <label>Credit <input name="Credit" value="0.00"></label>
        <label>Balance <input name="Balance" value="0.00"></label>
        <label>Statement <select name="Statement"><option value="BS">BS</option><option value="IS">IS</option><option value="RE">RE</option></select></label>
        <label>Order <input name="Order"></label>
        <label>Comment <input name="Comment"></label>
        <div class="modal-actions" style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end">
          <button type="submit" class="add-btn">Save</button>
          <button type="button" id="cancelModal" class="btn">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  </div> <!-- Close content-wrapper -->

  <script src="/frontend/ChartOfAccounts.js"></script>
</body>
</html>